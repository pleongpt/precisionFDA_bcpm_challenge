/home/pleong/venv/bin/python3 /home/pleong/precisionFDA/brain_cancer_biomarkers_challenge/Phase1/p1sc3_model/p1sc3_model.py -m soft_voting -bagging 1 -smote 1 -phenotype 1 -prefilter 1
Python version: 3.6.9
Scikit-learn version: 0.22.1
Numpy version: 1.17.2
Pandas version: 0.25.1

Command: "p1sc3_model.py -m soft_voting -bagging 1 -smote 1 -phenotype 1 -prefilter 1"
Execution date/time: 2020-01-21 09:37:49.317833

************************************************************************************
numpy.random rnd_seed=1234 test_set_ratio=0.20 SMOTE ratio=0.80
************************************************************************************
Shape of RNA_DNA_CN data: (166, 20146), max=14.9571, min=0.0000, NaN=0.00%
Shape of clinical phenotype data: (166, 4)
Shape of survival status data: (166, 1)

All PATIENTID entries in data_rna_dna_CN are unique.
All PATIENTID entries in data_phenotype are unique.
All PATIENTID entries in data_survival are unique.

PATIENTID entries in data_rna_dna_CN are the same as in data_phenotype.
PATIENTID entries in data_rna_dna_CN are the same as in data_survival.

--------------------------------------------------------------------------
Swap the data_survival values so that the minority is 1 and majority is 0.
Will flip back this logic in actual model prediction.
--------------------------------------------------------------------------

Split data into training and test sets using StratifiedShuffleSplit. test_set_ratio=0.20

Shape of X_train: (132, 42)
Shape of y_train: (132, 1)

Shape of X_test: (34, 42)
Shape of y_test: (34, 1)

Original data_survival label distribution (0:deceased, 1:alive):
0:126	0.7590%
1:40	0.2410%

y_train label distribution (0:deceased, 1:alive):
0 :100	0.7576%
1 :32	0.2424%

y_test label distribution (0:deceased, 1:alive):
0:26	0.7647%
1:8	0.2353%

--------------------------------------------------------------------------
Apply SMOTENC to synthesize more minority data against majority in training set.
smote_ratio=0.80
--------------------------------------------------------------------------
New shape of X_train: (180, 42)
New shape of y_train: (180,)
SMOTEd y_train label distribution (0:deceased, 1:alive):
0 :100	0.5556%
1 :80	0.4444%

**************************************************************************
Logistic Regression with L1 regularization on RNA_DNA_CN_data vs survival labels:
solver = liblinear, C = 50.00, max_ter = 500
Bagging = True
**************************************************************************

**************************************************************************
SVM with linear kernel on RNA_DNA_CN_data vs survival labels:
C = 10.00
Bagging = True
**************************************************************************

**************************************************************************
Random Forest Classifier on RNA_DNA_CN_data vs survival labels:
n_estimators = 1000, class_weight = balanced_subsample
(No additional bagging on RF since RF itself uses bagging)
**************************************************************************

**************************************************************************
XGBoost Classifier on RNA_DNA_CN_data vs survival labels:
(No additional bagging on XGBoost since XGBoost itself uses bagging)
**************************************************************************

**************************************************************************
Soft Voting Classifier on RNA_DNA_CN_data vs survival labels:
**************************************************************************
==============================
On training set (soft_voting)
==============================
Training Set: Bagging OOB score = 1.00
Training set: Accuracy via cross_val_score(k=5): 0.93 (+/- 0.13)

F1 score via cross_val_score(k=5): 0.92 (+/- 0.16)

Training Set: Accuracy via cross_val_predict(k=5) = 0.93
Training Set: Balanced Accuracy = 0.93
Training Set: Cohen's Kappa score = 0.85
Training Set: Confusion Matrix via cross_val_predict:
Predicted    0   1  All
Actual                 
0           94   6  100
1            7  73   80
All        101  79  180

Training Set cross_val_predict: Precision = 0.92
Training Set cross_val_predict: Recall = 0.91
Training Set cross_val_predict: F1 = 0.92
Training Set: cross_val_predict AUC = 0.98

Saving figure soft_voting_ROC_train_data_plot
Saving figure soft_voting_precision_vs_recall_train_data_plot

==============================
On test set (soft_voting)
==============================
Test Set: Accuracy = 0.79
Test Set: Balanced Accuracy = 0.61
Test Set: Cohen's Kappa score = 0.27
Test Set: Confusion Matrix:
Predicted   0  1  All
Actual               
0          25  1   26
1           6  2    8
All        31  3   34

Test Set: Precision = 0.67
Test Set: Recall = 0.25
Test Set: F1 = 0.36
Test Set: AUC = 0.75

Saving figure soft_voting_ROC_test_data_plot
Saving figure soft_voting_precision_vs_recall_test_data_plot

Save model to file ./data/p1sc3_sv_clf.joblib

Run time was 33.72s.

Process finished with exit code 0

